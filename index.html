<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Reflection App</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app-container">
    <h1>Daily Reflection</h1>
    <label for="moodSelector">Today's Mood:</label>
    <select id="moodSelector">
      <option value="">Select mood</option>
      <option value="happy">😊 Happy</option>
      <option value="sad">😢 Sad</option>
      <option value="motivated">💪 Motivated</option>
      <option value="tired">😴 Tired</option>
      <option value="anxious">😟 Anxious</option>
      <option value="grateful">🙏 Grateful</option>
    </select>
    <textarea id="reflectionInput" placeholder="Write your reflection..."></textarea>
    <button onclick="saveReflection()">Save Reflection</button>
    <label for="filterDate">Filter by Date:</label>
    <input type="date" id="filterDate" onchange="filterReflections()" />
    <button onclick="clearFilter()">Clear Filter</button>
    <h2>Past Reflections</h2>
    <div id="reflectionList"></div>
  </div>
  <script>
    // Store reflections in memory
    let reflections = [];

    function saveReflection() {
      const mood = document.getElementById('moodSelector').value;
      const moodText = document.getElementById('moodSelector').options[document.getElementById('moodSelector').selectedIndex].text;
      const reflection = document.getElementById('reflectionInput').value;
      if (!mood || !reflection.trim()) {
        alert('Please select a mood and write your reflection.');
        return;
      }
      const now = new Date();
      const dateTimeString = now.toLocaleString();
      const dateString = now.toISOString().split('T')[0];
      const entry = {
        id: Date.now(),
        dateTime: dateTimeString,
        date: dateString,
        mood: moodText,
        reflection: reflection
      };
      reflections.unshift(entry);
      renderReflections();
      document.getElementById('reflectionInput').value = '';
      document.getElementById('moodSelector').value = '';
    }

    function renderReflections(filtered = null) {
      const reflectionList = document.getElementById('reflectionList');
      reflectionList.innerHTML = '';
      const items = filtered !== null ? filtered : reflections;
      items.forEach(entry => {
        const div = document.createElement('div');
        div.className = 'reflection-entry';
        div.innerHTML = `
          <strong>Date:</strong> ${entry.dateTime}<br>
          <strong>Mood:</strong> ${entry.mood}<br>
          <strong>Reflection:</strong> <span id="reflection-text-${entry.id}">${entry.reflection}</span>
          <br>
          <button onclick="editReflection(${entry.id})">Edit</button>
          <button onclick="deleteReflection(${entry.id})">Delete</button>
        `;
        reflectionList.appendChild(div);
      });
    }

    function filterReflections() {
      const filterDate = document.getElementById('filterDate').value;
      if (!filterDate) {
        renderReflections();
        return;
      }
      const filtered = reflections.filter(r => r.date === filterDate);
      renderReflections(filtered);
    }

    function clearFilter() {
      document.getElementById('filterDate').value = '';
      renderReflections();
    }

    function deleteReflection(id) {
      reflections = reflections.filter(r => r.id !== id);
      renderReflections();
    }

    function editReflection(id) {
      const entry = reflections.find(r => r.id === id);
      if (!entry) return;
      const newReflection = prompt('Edit your reflection:', entry.reflection);
      if (newReflection !== null && newReflection.trim() !== '') {
        entry.reflection = newReflection;
        renderReflections();
      }
    }
  </script>
</body>
</html>
